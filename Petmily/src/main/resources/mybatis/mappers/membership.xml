<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.petmily.dao.MembershipDAO">
	<insert id="insertMemberShip" parameterType="membership">
	<![CDATA[
		insert into membership (user_id,mem_grade,mem_start_date) 
		values(#{user_id},#{mem_grade},now())
	]]>		
	</insert>
	
	<!-- <insert id="insertMemberShip" parameterType="membership">
	<![CDATA[
		insert into membership (user_id,mem_grade,mem_start_date, mem_restart_date, mem_next_date) 
		values(#{user_id},#{mem_grade},now(),now(),date_add(now(),INTERVAL 1 MONTH))
	]]>		
	</insert> -->
	
	<!-- 아이디로 회원 찾기 -->	
	<select id="queryUserMemberShip" resultType="membership" parameterType="String">
      <![CDATA[
         select mem_grade,mem_next_date from user right join 
         membership on user.user_id = membership.user_id
         where user.user_id = #{user_id}
      ]]>
	</select>	
	
	<select id="payinfo" resultType="User" parameterType="String">
      <![CDATA[
         select user_name, user_phone, user_address1, user_address2, user_zipcode from user where user_id = #{user_id}
      ]]>
	</select>	

</mapper>
